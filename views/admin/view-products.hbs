<section class="container">
  <div class="container p-5">
    <div class="row m-2">
      <a href="/admin/add-product" class="btn btn-success  ml-auto ">Add Products</a>
    </div>
    <table class="table mt-5" id="dataTable">
      <thead>
        <tr>
          <th scope="col">No.</th>
          <th scope="col">Product Name</th>
          <th scope="col">Category</th>
          <th>Price</th>
          <th scope="col">Description</th>
          <th scope="col">Image</th>
          <th>Option</th>


        </tr>
      </thead>
      <tbody>
        {{#each products}}
        <tr>
          <th scope="row">{{inc @index}}</th>
          <td>{{this.Name}}</td>
          <td>{{this.Category}}</td>
          <td>â‚¹{{this.Price}}</td>
          <td>{{this.Description}}</td>
          <td><img style="width: 60px;height: 60px;" src="/product-images/{{this._id}}.jpg"></td>
          <td>

            <a class="btn btn-primary" onclick="editProduct(event)" name="{{this.Name}}"
              href="/admin/edit-product?id={{this._id}}">Edit</a>
            <a class="btn btn-danger" onclick="deleteProduct(event)" name="{{this.Name}}"
              href="/admin/delete-product?id={{this._id}}">Delete</a>

          </td>


        </tr>
        {{/each}}

      </tbody>
    </table>
  </div>
</section>

<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
  function deleteProduct(event) {

    var name = event.currentTarget.name;
    var link = event.currentTarget.href;
    event.preventDefault();



    Swal.fire({
      title: 'Are you sure?',
      text: "You want to delete  " + name + "!",
      icon: 'warning',
      iconColor: '#bf0f0f',
      showCancelButton: true,
      confirmButtonColor: '#11ba25',
      cancelButtonColor: '#bf0f0f',
      confirmButtonText: ` Yes `
    }).then((result) => {
      if (result.isConfirmed) {

        window.location = link;
      } else {

        return false;

      }
    })
  }


  function editProduct(event) {
    var link = event.currentTarget.href;
    var name = event.currentTarget.name;
    event.preventDefault();



    Swal.fire({
      title: 'Are you sure?',
      text: "You want to edit  " + name + "!",
      //icon: 'warning',
      //iconColor: '#bf0f0f',
      showCancelButton: true,
      confirmButtonColor: '#11ba25',
      cancelButtonColor: '#bf0f0f',
      confirmButtonText: `Yes`
    }).then((result) => {
      if (result.isConfirmed) {

        window.location = link;
      } else {

        return false;
      }
    })
  }  
</script>